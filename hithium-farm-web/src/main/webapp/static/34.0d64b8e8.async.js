(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[34],{fmXB:function(e,t,a){"use strict";var l=a("g09b"),n=a("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("IzEo");var o=l(a("bx4M")),u=l(a("jehZ"));a("g9YV");var i=l(a("wCAj"));a("+L6B");var r=l(a("2/Rp"));a("5NDa");var s=l(a("5rEg"));a("/zsF");var d=l(a("PArb"));a("miYZ");var c=l(a("tsqr")),f=l(a("p0pE")),p=l(a("2Taf")),m=l(a("vZ4D")),h=l(a("l4Ni")),y=l(a("ujKo")),g=l(a("rlhR")),v=l(a("MhPg"));a("2qtc");var w=l(a("kLXV"));a("y8nQ");var E,b,C,k,S=l(a("Vl3Y")),T=n(a("q1tI")),D=a("MuoO"),L=l(a("zHco")),x=S.default.Item,M=w.default.confirm,R=(E=S.default.create(),b=(0,D.connect)(function(e){var t=e.system,a=e.loading;return{system:t,tableLoading:a.effects["system/getUserList"]}}),E(C=b((k=function(e){function t(){var e,a;(0,p.default)(this,t);for(var l=arguments.length,n=new Array(l),o=0;o<l;o++)n[o]=arguments[o];return a=(0,h.default)(this,(e=(0,y.default)(t)).call.apply(e,[this].concat(n))),a.state={selectedRowKeys:[],searchData:{page:1,pageSize:10},visible:!1,info:null,uid:0},a.getList=function(){var e=a.props.dispatch,t=a.state.searchData;e({type:"system/getUserList",payload:(0,f.default)({},t)})},a.onSelectChange=function(e){a.setState({selectedRowKeys:e})},a.showTotal=function(e,t){return T.default.createElement("span",null,"\u663e\u793a\u7b2c".concat(t[0],"\u5230\u7b2c ").concat(t[1]," \u6761\u8bb0\u5f55\uff0c\u603b\u5171 ").concat(e," \u6761\u8bb0\u5f55"))},a.handleReset=function(e){e.preventDefault();var t=a.props.form;t.resetFields(),a.handleSubmit(e)},a.handleTableChange=function(e){var t=a.state.searchData;a.setState({searchData:(0,f.default)({},t,{page:e.current,pageSize:e.pageSize})},function(){a.getList()})},a.handleSubmit=function(e){e.preventDefault();var t=a.props.form,l=a.state.searchData;t.validateFields(["searchText"],function(e,t){if(!e){var n=(0,f.default)({},l,{page:1,searchText:t.searchText});a.setState({searchData:n},function(){a.getList()})}})},a.showResetModal=function(e){var t=a.props.dispatch,l=(0,g.default)(a);M({title:"\u786e\u5b9a\u91cd\u7f6e\u6b64\u7528\u6237\u5bc6\u7801\u4e48?",okText:"\u786e\u8ba4",okType:"danger",cancelText:"\u53d6\u6d88",onOk:function(){t({type:"system/resetUser",payload:{uid:e}}).then(function(e){1===e.code&&l.getList()})},onCancel:function(){}})},a.showDelModal=function(e){var t=a.props.dispatch,l=(0,g.default)(a);M({title:"\u786e\u5b9a\u5220\u9664\u6b64\u7528\u6237\u4e48?",okText:"\u786e\u8ba4",okType:"danger",cancelText:"\u53d6\u6d88",onOk:function(){t({type:"system/delUser",payload:{uid:e}}).then(function(e){1===e.code&&l.getList()})},onCancel:function(){}})},a.showDelModalMore=function(){var e=a.state.selectedRowKeys,t=a.props.dispatch,l=(0,g.default)(a);e.length?M({title:"\u786e\u5b9a\u5220\u9664\u8fd9\u4e9b\u9009\u4e2d\u7684\u7528\u6237\u4e48?",okText:"\u786e\u8ba4",okType:"danger",cancelText:"\u53d6\u6d88",onOk:function(){t({type:"system/delUserMore",payload:{uids:e.join(",")}}).then(function(e){1===e.code&&l.getList()})},onCancel:function(){}}):c.default.info("\u8bf7\u5148\u9009\u62e9\u8981\u5220\u9664\u7684\u7528\u6237\uff01")},a.postUser=function(){var e=a.props,t=e.form,l=e.dispatch,n=a.state.uid;t.validateFields(["name","phoneNum","password"],function(e,t){e||(n?l({type:"system/editUser",payload:(0,f.default)({},t,{id:n})}).then(function(e){1===e.code&&a.setState({info:null,visible:!1,uid:0},function(){a.getList()})}):l({type:"system/addUser",payload:(0,f.default)({},t)}).then(function(e){1===e.code&&a.setState({info:null,visible:!1,uid:0},function(){a.getList()})}))})},a}return(0,v.default)(t,e),(0,m.default)(t,[{key:"componentDidMount",value:function(){this.getList()}},{key:"render",value:function(){var e=this,t=this.props,a=t.form.getFieldDecorator,l=t.system,n=t.tableLoading,c=this.state,p=c.selectedRowKeys,m=c.visible,h=c.uid,y=c.info,g=l.userList,v=l.userPage,E={selectedRowKeys:p,onChange:this.onSelectChange},b={labelCol:{span:6},wrapperCol:{span:14}},C=[{title:"\u5e8f\u53f7",dataIndex:"id",render:function(e,t,a){return(v.current-1)*v.pageSize+a+1}},{title:"\u59d3\u540d",dataIndex:"name"},{title:"\u8054\u7cfb\u65b9\u5f0f",dataIndex:"phoneNum"},{title:"\u521b\u5efa\u65f6\u95f4",dataIndex:"createTime"},{title:"\u64cd\u4f5c",render:function(t,a){return T.default.createElement("span",null,T.default.createElement("a",{onClick:function(){e.setState({visible:!0,uid:a.id,info:a})}},"\u7f16\u8f91"),T.default.createElement(d.default,{type:"vertical"}),T.default.createElement("a",{onClick:function(){return e.showDelModal(a.id)}},"\u5220\u9664"),T.default.createElement(d.default,{type:"vertical"}),T.default.createElement("a",{onClick:function(){return e.showResetModal(a.id)}},"\u91cd\u7f6e\u5bc6\u7801"))}}];return T.default.createElement(L.default,null,T.default.createElement(o.default,{bordered:!1,bodyStyle:{padding:0}},T.default.createElement(S.default,{layout:"inline",hideRequiredMark:!0,onSubmit:this.handleSubmit},T.default.createElement(x,null,a("searchText")(T.default.createElement(s.default,{placeholder:"\u59d3\u540d/\u624b\u673a\u53f7"}))),T.default.createElement(x,null,T.default.createElement(r.default,{type:"primary",htmlType:"submit"},"\u641c\u7d22")),T.default.createElement(x,null,T.default.createElement(r.default,{onClick:this.handleReset},"\u91cd\u7f6e")),T.default.createElement("br",null),T.default.createElement(x,null,T.default.createElement(r.default,{type:"primary",onClick:function(){e.setState({visible:!0,uid:0})}},"\u65b0\u589e")),T.default.createElement(x,null,T.default.createElement(r.default,{type:"primary",onClick:this.showDelModalMore},"\u6279\u91cf\u5220\u9664"))),T.default.createElement(i.default,{className:"mt-10",rowKey:function(e){return e.id},dataSource:g,pagination:(0,f.default)({},v,{showSizeChanger:!0,showQuickJumper:!0,showTotal:this.showTotal}),columns:C,onChange:this.handleTableChange,loading:n,rowSelection:E}),T.default.createElement(w.default,{title:h?"\u7f16\u8f91":"\u65b0\u589e",visible:m,onOk:this.postUser,onCancel:function(){e.setState({info:null,visible:!1,uid:0})},destroyOnClose:!0},T.default.createElement(S.default,null,T.default.createElement(x,(0,u.default)({},b,{label:"\u59d3\u540d"}),a("name",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u59d3\u540d"}],initialValue:y&&y.name})(T.default.createElement(s.default,{autoComplete:"off",placeholder:"\u8bf7\u8f93\u5165\u59d3\u540d"}))),T.default.createElement(x,(0,u.default)({},b,{label:"\u8054\u7cfb\u65b9\u5f0f"}),a("phoneNum",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u8054\u7cfb\u65b9\u5f0f"},{pattern:/^(0|86|17951)?(13[0-9]|15[0-9]|166|17[0-9]|18[0-9]|14[57])[0-9]{8}$/,message:"\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u8054\u7cfb\u65b9\u5f0f"}],initialValue:y&&y.phoneNum})(T.default.createElement(s.default,{autoComplete:"off",placeholder:"\u8bf7\u8f93\u5165\u8054\u7cfb\u65b9\u5f0f"}))),h?"":T.default.createElement(x,(0,u.default)({},b,{label:"\u5bc6\u7801"}),a("password",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5bc6\u7801"},{pattern:/^(?=.*[0-9])(?=.*[a-z])(?=.*[A-Z])(?=.*[^a-zA-Z0-9]).{8,16}$/,message:"\u5bc6\u7801\u4e2d\u5fc5\u987b\u5305\u542b\u5927\u5c0f\u5199\u5b57\u6bcd\u3001\u6570\u5b57\u3001\u7279\u6b8a\u5b57\u7b26\uff0c\u81f3\u5c118\u4e2a\u5b57\u7b26\uff0c\u6700\u591a16\u4e2a\u5b57\u7b26\u3002"}],initialValue:y&&y.password})(T.default.createElement(s.default,{autoComplete:"new-password",type:"password",placeholder:"\u8bf7\u8f93\u5165\u5bc6\u7801"})))))))}}]),t}(T.PureComponent),C=k))||C)||C),z=R;t.default=z}}]);